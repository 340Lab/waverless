{
	"nodes":[
		{"id":"cb82b904dab26671","type":"group","x":-1600,"y":-680,"width":2780,"height":2200,"label":"data"},
		{"id":"core_module_group","type":"group","x":-1600,"y":-680,"width":1000,"height":780,"label":"数据管理核心模块"},
		{"id":"data_write_flow","type":"group","x":-380,"y":140,"width":1520,"height":460,"label":"数据写入流程"},
		{"id":"batch_transfer_group","type":"group","x":-740,"y":640,"width":1880,"height":820,"label":"Batch数据传输实现"},
		{"id":"parallel_group","type":"group","x":-740,"y":1500,"width":1880,"height":600,"label":"并发执行结构"},
		{"id":"storage_write_flow","type":"group","x":-380,"y":-300,"width":1520,"height":400,"label":"存储节点写入流程"},
		{"id":"133214da264cfe72","type":"text","text":"## struct DataGeneral\n- 提供数据读写接口\n- 管理元数据\n- 协调各子模块功能\n- 错误处理和恢复\n- 资源生命周期","x":-1200,"y":-660,"width":340,"height":214,"color":"4"},
		{"id":"core_functions","type":"text","text":"## fn write_data\n- 同步/异步写入\n- 数据完整性保证\n- 分片并行写入\n- 缓存节点同步\n- 错误重试机制","x":-845,"y":-407,"width":280,"height":275,"color":"4"},
		{"id":"data_general_core","type":"text","text":"# 数据管理核心模块\n- 数据流向控制\n- 并行结构管理\n- 错误处理链\n- 资源管理","x":-1403,"y":-339,"width":330,"height":100,"color":"4"},
		{"id":"821e415b6438e20d","type":"text","text":"## struct DataSplit\n- 数据分片管理\n- 分片信息维护\n- 分片操作协调\n- 存储节点分配\n- 局部性优化","x":-1415,"y":-53,"width":342,"height":158,"color":"4"},
		{"id":"b31695207931d96e","type":"text","text":"## fn get_or_del_data\n- 数据检索和删除\n- 资源清理\n- 缓存一致性\n- 并发访问控制","x":-730,"y":-602,"width":330,"height":156,"color":"4"},
		{"id":"5c4357fc2216ea51","type":"text","text":"## batch写入接口\n- 缓存主动推送\n- 并行写入支持\n- 错误恢复机制\n- 内存复用优化","x":-525,"y":-192,"width":250,"height":120,"color":"4"},
		{"id":"data_item","type":"text","text":"# 数据项处理\n\n## WriteSplitDataTaskGroup\n- 管理数据分片写入任务组\n- 分片合并优化\n- 状态同步\n- 并行控制\n## SharedMemHolder\n- 共享内存数据访问\n- 资源自动管理\n## SharedMemOwnedAccess\n- 共享内存所有权控制\n- 访问安全保证\n- 生命周期管理","x":-160,"y":-472,"width":460,"height":520,"color":"3"},
		{"id":"storage_node_1","type":"text","text":"存储节点1\n接收层:\n- 接收分片请求\n- 版本号验证\n- 数据完整性校验\n写入任务层:\n- 分片范围验证\n- 并发写入控制\n- 错误重试机制\n本地存储层:\n- 数据持久化\n- 版本管理\n- 空间回收\n结果返回:\n- 写入状态\n- 远程版本号\n- 错误信息","x":-340,"y":-260,"width":200,"height":280,"color":"1"},
		{"id":"storage_node_2","type":"text","text":"存储节点2\n接收层:\n- 接收分片请求\n- 版本号验证\n- 数据完整性校验\n写入任务层:\n- 分片范围验证\n- 并发写入控制\n- 错误重试机制\n本地存储层:\n- 数据持久化\n- 版本管理\n- 空间回收\n结果返回:\n- 写入状态\n- 远程版本号\n- 错误信息","x":-340,"y":-120,"width":200,"height":280,"color":"1"},
		{"id":"write_task_1","type":"text","text":"写入任务1\n- 分片范围验证\n- 数据完整性检查\n- 并发写入控制\n- 错误重试","x":0,"y":-260,"width":200,"height":120,"color":"2"},
		{"id":"write_task_2","type":"text","text":"写入任务2\n- 分片范围验证\n- 数据完整性检查\n- 并发写入控制\n- 错误重试","x":0,"y":-120,"width":200,"height":120,"color":"2"},
		{"id":"local_storage_1","type":"text","text":"本地存储1\n- 持久化数据\n- 版本管理\n- 空间回收","x":320,"y":-260,"width":200,"height":100,"color":"3"},
		{"id":"local_storage_2","type":"text","text":"本地存储2\n- 持久化数据\n- 版本管理\n- 空间回收","x":320,"y":-120,"width":200,"height":100,"color":"3"},
		{"id":"write_result_1","type":"text","text":"写入结果1\n- 成功/失败\n- 远程版本号\n- 错误信息","x":640,"y":-260,"width":200,"height":100,"color":"4"},
		{"id":"write_result_2","type":"text","text":"写入结果2\n- 成功/失败\n- 远程版本号\n- 错误信息","x":640,"y":-120,"width":200,"height":100,"color":"4"},
		{"id":"general_phase1","type":"text","text":"General阶段1：准备\n- 初始化DataItems\n- 计算数据大小\n- 创建SharedMemHolder","x":-340,"y":170,"width":200,"height":100,"color":"1"},
		{"id":"general_phase2","type":"text","text":"General阶段2：调度\n- 生成unique_id\n- 发送调度请求\n- 等待决策返回","x":-340,"y":300,"width":200,"height":100,"color":"1"},
		{"id":"master_node","type":"text","text":"Master节点 [DataMaster]\n- schedule_data()\n1. 生成DataSetMeta\n2. 创建DataSplits\n3. 分配存储节点\n4. 返回调度决策","x":120,"y":170,"width":200,"height":160,"color":"2"},
		{"id":"general_phase3","type":"text","text":"General阶段3：分发\n- 解析调度决策\n- 创建写入任务组\n- 初始化并发控制","x":-340,"y":430,"width":200,"height":100,"color":"1"},
		{"id":"storage_group","type":"text","text":"存储节点组","x":600,"y":170,"width":150,"height":60,"color":"3"},
		{"id":"storage_node_3","type":"text","text":"存储节点1","x":800,"y":120,"width":150,"height":60,"color":"3"},
		{"id":"storage_node_4","type":"text","text":"存储节点2","x":800,"y":200,"width":150,"height":60,"color":"3"},
		{"id":"storage_node_5","type":"text","text":"存储节点3","x":800,"y":280,"width":150,"height":60,"color":"3"},
		{"id":"cache_group","type":"text","text":"缓存节点组","x":600,"y":370,"width":150,"height":60,"color":"5"},
		{"id":"cache_node_1","type":"text","text":"缓存节点1","x":800,"y":320,"width":150,"height":60,"color":"5"},
		{"id":"cache_node_2","type":"text","text":"缓存节点2","x":800,"y":400,"width":150,"height":60,"color":"5"},
		{"id":"cache_node_3","type":"text","text":"缓存节点3","x":800,"y":480,"width":150,"height":60,"color":"5"},
		{"id":"batch_manager","type":"text","text":"# BatchManager\n\n## 管理功能\n- 创建传输任务\n- 分配请求ID\n- 跟踪传输状态\n- 错误恢复\n\n## 数据处理\n- 分块管理\n- 数据校验\n- 内存复用\n- 并发控制","x":-700,"y":700,"width":300,"height":300,"color":"1"},
		{"id":"batch_transfer","type":"text","text":"# BatchTransfer\n\n## 传输控制\n- 数据分块\n- 进度跟踪\n- 错误处理\n- 资源管理\n\n## 数据流\n- 发送队列\n- 接收缓冲\n- 内存池\n- 流量控制","x":-700,"y":1020,"width":300,"height":300,"color":"2"},
		{"id":"parallel_executor","type":"text","text":"# 并发执行器\n\n## 任务调度\n- 优先级队列\n- 负载均衡\n- 资源限制\n- 任务分组\n\n## 执行控制\n- 状态跟踪\n- 超时处理\n- 错误恢复\n- 取消机制","x":-700,"y":1540,"width":300,"height":300,"color":"3"},
		{"id":"task_group","type":"text","text":"# 任务组\n\n## 组织结构\n- 任务依赖\n- 执行顺序\n- 资源分配\n- 状态同步\n\n## 控制功能\n- 进度监控\n- 故障处理\n- 数据一致性\n- 完成确认","x":-340,"y":1540,"width":300,"height":300,"color":"4"},
		{"id":"batch_initiator","type":"text","text":"# 发起节点 [DataGeneral]\n\n## call_batch_data()\n- 分割数据块(1MB)\n- 创建有界任务池\n- 建议并发数=3\n- 任务队列控制","x":-300,"y":700,"width":300,"height":180,"color":"1"},
		{"id":"batch_request1","type":"text","text":"# BatchDataRequest(1)\n- request_id\n- block_type\n- block_index: 0\n- data","x":100,"y":700,"width":250,"height":120,"color":"2"},
		{"id":"batch_request2","type":"text","text":"# BatchDataRequest(2)\n- request_id\n- block_type\n- block_index: 1\n- data","x":100,"y":840,"width":250,"height":120,"color":"2"},
		{"id":"batch_request3","type":"text","text":"# BatchDataRequest(3)\n- request_id\n- block_type\n- block_index: 2\n- data","x":100,"y":980,"width":250,"height":120,"color":"2"},
		{"id":"batch_response1","type":"text","text":"# BatchDataResponse(1)\n- request_id\n- success\n- error_message\n- version","x":450,"y":700,"width":250,"height":120,"color":"3"},
		{"id":"batch_response2","type":"text","text":"# BatchDataResponse(2)\n- request_id\n- success\n- error_message\n- version","x":450,"y":840,"width":250,"height":120,"color":"3"},
		{"id":"batch_response3","type":"text","text":"# BatchDataResponse(3)\n- request_id\n- success\n- error_message\n- version","x":450,"y":980,"width":250,"height":120,"color":"3"}
	],
	"edges":[
		{"id":"storage_to_task1","fromNode":"storage_node_1","fromSide":"right","toNode":"write_task_1","toSide":"left","label":"分片数据"},
		{"id":"storage_to_task2","fromNode":"storage_node_2","fromSide":"right","toNode":"write_task_2","toSide":"left","label":"分片数据"},
		{"id":"task_to_local1","fromNode":"write_task_1","fromSide":"right","toNode":"local_storage_1","toSide":"left","label":"持久化"},
		{"id":"task_to_local2","fromNode":"write_task_2","fromSide":"right","toNode":"local_storage_2","toSide":"left","label":"持久化"},
		{"id":"local_to_result1","fromNode":"local_storage_1","fromSide":"right","toNode":"write_result_1","toSide":"left","label":"写入状态"},
		{"id":"local_to_result2","fromNode":"local_storage_2","fromSide":"right","toNode":"write_result_2","toSide":"left","label":"写入状态"},
		{"id":"phase1_to_phase2","fromNode":"general_phase1","fromSide":"bottom","toNode":"general_phase2","toSide":"top","label":"DataItems"},
		{"id":"phase2_to_master","fromNode":"general_phase2","fromSide":"right","toNode":"master_node","toSide":"left","label":"调度请求"},
		{"id":"master_to_phase2","fromNode":"master_node","fromSide":"left","toNode":"general_phase2","toSide":"right","label":"调度决策\n- version\n- splits\n- nodes"},
		{"id":"phase2_to_phase3","fromNode":"general_phase2","fromSide":"bottom","toNode":"general_phase3","toSide":"top","label":"决策信息"},
		{"id":"phase3_to_storage","fromNode":"general_phase3","fromSide":"right","toNode":"storage_group","toSide":"left","label":"分发存储任务"},
		{"id":"storage_to_nodes","fromNode":"storage_group","fromSide":"right","toNode":"storage_node_3","toSide":"left"},
		{"id":"storage_to_nodes2","fromNode":"storage_group","fromSide":"right","toNode":"storage_node_4","toSide":"left"},
		{"id":"storage_to_nodes3","fromNode":"storage_group","fromSide":"right","toNode":"storage_node_5","toSide":"left"},
		{"id":"phase3_to_cache","fromNode":"general_phase3","fromSide":"right","toNode":"cache_group","toSide":"left","label":"分发缓存任务"},
		{"id":"cache_to_nodes","fromNode":"cache_group","fromSide":"right","toNode":"cache_node_1","toSide":"left"},
		{"id":"cache_to_nodes2","fromNode":"cache_group","fromSide":"right","toNode":"cache_node_2","toSide":"left"},
		{"id":"cache_to_nodes3","fromNode":"cache_group","fromSide":"right","toNode":"cache_node_3","toSide":"left"},
		{"id":"batch_flow1","fromNode":"batch_manager","fromSide":"right","toNode":"batch_transfer","toSide":"left","label":"创建传输"},
		{"id":"batch_flow2","fromNode":"batch_transfer","fromSide":"right","toNode":"parallel_executor","toSide":"left","label":"执行任务"},
		{"id":"parallel_flow","fromNode":"parallel_executor","fromSide":"right","toNode":"task_group","toSide":"left","label":"任务调度"},
		{"id":"initiator_to_manager","fromNode":"batch_initiator","fromSide":"left","toNode":"batch_manager","toSide":"right","label":"创建批量传输"},
		{"id":"initiator_to_request1","fromNode":"batch_initiator","fromSide":"right","toNode":"batch_request1","toSide":"left","label":"并发发送\n数据块1"},
		{"id":"initiator_to_request2","fromNode":"batch_initiator","fromSide":"right","toNode":"batch_request2","toSide":"left","label":"并发发送\n数据块2"},
		{"id":"initiator_to_request3","fromNode":"batch_initiator","fromSide":"right","toNode":"batch_request3","toSide":"left","label":"并发发送\n数据块3"},
		{"id":"request1_to_response1","fromNode":"batch_request1","fromSide":"right","toNode":"batch_response1","toSide":"left","label":"处理响应"},
		{"id":"request2_to_response2","fromNode":"batch_request2","fromSide":"right","toNode":"batch_response2","toSide":"left","label":"处理响应"},
		{"id":"request3_to_response3","fromNode":"batch_request3","fromSide":"right","toNode":"batch_response3","toSide":"left","label":"处理响应"}
	]
}
